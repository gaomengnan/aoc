* 问题
** Pair with given sum in a sorted array

*** 描述

You are given an integer target and an array arr[]. You have to find number of pairs in arr[] which sums up to target. It is given that the elements of the arr[] are in sorted order. Note: pairs should have elements of distinct indexes.


*** 双指针

#+begin_src python

class Solution:
    def countPairs(self, arr, target):
        # Complete the function

        n = len(arr)

        i = 0
        j = n - 1

        ans = 0
        while i < j:
            toSum = arr[i] + arr[j]

            if toSum == target:
                lv = arr[i]
                rv = arr[j]

                k = i + 1
                h = j - 1

                while k < j and arr[k] == lv:
                    k += 1

                while i < h and arr[h] == rv:
                    h -= 1

                if lv == rv:
                    ans += (k - i + 1) * (k - i) // 2
                else:
                    ans += (k - i) * (j - h)
                i = k
                j = h

            elif toSum < target:
                i += 1
            else:
                j -= 1

        return ans

#+end_src
